# How to use myPresto/omegagene on Docker container

**Author : Hiroki Terazawa
<br>
1 Grad. Sch. Life sci., Ritsumeikan Univ.
<br>


## 0. Building docker container

Before conducting MD simulations using docker, please conduct the commands bellow to get omegagene images on your computer.

```sh
git clone https://github.com/terapizawa/myPresto-omegagene.git
```
then,

```sh
cd omegagene-docker
```
```sh
docker-compose up -d
```
The container will be built and working.

Get into the docker container

```sh
sudo docker exec -it og_omegagene_1 /bin/bash
```

## 1. Input Files

The input files required for conducting MD simulations using myPresto/omegagene are described bellow, same as conducting it using myPresto/psygene.

1. Topology file (generated by Tplgene program)
2. Restart file (including the initial coordinates and velocities)
3. Shake file (generated by SHAKEinp program, not needed for coarse-grained simulations)
4. System configuration file (OO.cls)
5. Simulation configuration file (md.inp, md.inp.run)

___
#### please execute the commands bellow to conduct MD simulations with omegagene and coarse-grained model
___

set  paths

```
export OMEGATK=/omegagene/toolkit/
```
change the working directory
```sh
cd ../omegagene/samples/cg_q8
```
make a topology file
```
python2.7 ${OMEGATK}/gen_tpl.py --pdb inp.pdb --param param.dat --tpl md.tpl --molname mol1
```
make a restart file
```
python2.7 ${OMEGATK}/presto_generate_velocities.py   -i inp.pdb   --i-tpl md.tpl   -t 100   -o md.restart   -s ${RANDOM}  --mol --check
```
make a cls file (md.inp.cls)
```
python2.7 ${OMEGATK}/mdinput_generator.py -i md.inp -o md.inp.cls -v v.0.52  > log_inputgen.txt
```
execute omegagene
```sh
/omegagene/install_here/bin/omegagene_wons  --cfg md.inp.run --inp md.inp.cls > md.out
```

change the cod file to trr files

```
python2.7 ${OMEGATK}/trajconv_presto_gro.py --i-pdb inp.pdb --i-crd md.cod -o md.trr --lx 200 --ly 200 --lz 200
```

you can also change restart file ( the structure at the final step) to pdb file
```
 python2.7 ${OMEGATK}/restart_to_pdb.py -i out.restart --i-pdb inp.pdb -o finalstep.pdb
```


DONE!!!!
